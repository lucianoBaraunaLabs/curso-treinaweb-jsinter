<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Desafio Caixa eletrônico minha posposta</title>
</head>
<body>
    <script>
        var contas = [{
            idConta: 1,
            saldo: 2500,
            limiteSaque: 200
        },{
            idConta: 2,
            saldo: 1000,
            limiteSaque: 500
        }];

       var caixaEletronico = function(conta, qtdSaque){
            
            var sacar = function(qtdSaque, saldoConta) {
                console.log('Seu saldo de conta é: ' + saldoConta)
                if(saldoConta < qtdSaque){
                    console.log('O valor de retirada excede valor que possui.')
                }else{
                    console.log('Valor sacado de: ' + qtdSaque)
                    console.log('Seu saldo agora é: ' + (saldoConta - qtdSaque));
                }
               
            };

            for(var prop in this){
                try {
                  if(this[prop].idConta === conta){
                    console.log('Checando conta');
                    console.log(this[prop].idConta);
                    sacar(qtdSaque, this[prop].saldo);
                    break;                    
                  }else{
                     throw new Error('Conta não existe. Por favor digite a conta certa.');  
                                       
                  }
                } catch (e) {
                  console.log(e.message);
                }
            }

        // MANEIRA ANTIGA
        //  var listaContas = this;
           
        //     var checkConta = function(obj, conta){
        //         try {
        //             if(obj === conta){
        //                 sacar(obj.saldo)
        //                  return obj;
        //             } else {
        //                throw new Error('Conta diferente. Por favor digite a conta certa.');
                       
        //             }
        //         } catch (e) {
        //             console.log(e.message);
        //         }
        //     };

        //      var sacar = function(qtdSaque, saldoConta) {
        //         if(saldoConta < qtdSaque){
        //             console.log('Eiiiita')
        //         }else{
        //             console.log('Seu saldo agora é: ' + (saldoConta - qtdSaque));
        //         }
               
        //     };

        //      for(var prop in listaContas){
        //         var conta = checkConta(listaContas[prop].idConta, conta)

        //         console.log(conta);

        //     };
        };
        caixaEletronico.call(contas, 1, 500);
    </script>
</body>
</html>
